create database GasStationPharmacy
GO 

use GasStationPharmacy
GO

CREATE TABLE COMPAÑIA(
Nombre VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Nombre)
);

CREATE TABLE SUCURSAL(
Nombre VARCHAR(50) NOT NULL,
Provincia VARCHAR(20),   
Cuidad VARCHAR(20),
Señas VARCHAR(50),
Descripcion VARCHAR(50),
Compañia VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Nombre),
);

CREATE TABLE EMPLEADO(
Cedula INT NOT NULL,
Nombre1 VARCHAR(20) NOT NULL,
Nombre2 VARCHAR(20),
Apellido1 VARCHAR(20) NOT NULL,
Apellido2 VARCHAR(20),
Provincia VARCHAR(20),   
Cuidad VARCHAR(20),
Señas VARCHAR(50),
FechaNacimiento DATE NOT NULL,
Contraseña VARCHAR(15) NOT NULL,
Sucursal VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Cedula)
);

CREATE TABLE ROL(
Nombre VARCHAR(20) NOT NULL,
Descripcion VARCHAR(50),
Activo BIT NOT NULL,
PRIMARY KEY(Nombre) 
);

CREATE TABLE CLIENTE(
Cedula INT NOT NULL,
Nombre1 VARCHAR(20) NOT NULL,
Nombre2 VARCHAR(20),
Apellido1 VARCHAR(20) NOT NULL,
Apellido2 VARCHAR(20),
Provincia VARCHAR(10),   
Cuidad VARCHAR(30),
Señas VARCHAR(50),
FechaNacimiento DATE NOT NULL,
Prioridad INT NOT NULL,
Contraseña VARCHAR(15) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Cedula)
);

CREATE TABLE PEDIDO(
Numero INT NOT NULL,
Estado VARCHAR(20) NOT NULL,
FechaRecojo DATETIME NOT NULL,
Telefono INT,
Sucursal VARCHAR(50) NOT NULL,
Cliente INT NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Numero)
);

CREATE TABLE RECETA(
Numero INT NOT NULL,
Imagen IMAGE,
Nombre VARCHAR(20),
Activo BIT NOT NULL,
PRIMARY KEY(Numero)
);

CREATE TABLE CASAFARMACEUTICA(
Nombre VARCHAR(50) NOT NULL,
Sede VARCHAR(50),
Activo BIT NOT NULL,
PRIMARY KEY(Nombre)
);

CREATE TABLE MEDICAMENTO(
Nombre VARCHAR(50) NOT NULL,
Prescripcion BIT NOT NULL,
Cantidad INT NOT NULL,
CasaFarmaceutica VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Nombre)
);

CREATE TABLE PADECIMIENTO(
Cliente INT NOT NULL,
Padecimiento VARCHAR(50),
Año INT,
Activo BIT NOT NULL,
PRIMARY KEY(Cliente,Padecimiento)
);

CREATE TABLE ADMINISTRADORXSUCURSAL(
Administrador INT NOT NULL,
Sucursal VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Administrador,Sucursal),
);

CREATE TABLE ROLXDEPENDIENTE(
Dependiente INT NOT NULL,
Rol VARCHAR(20) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Dependiente,Rol)
);

CREATE TABLE MEDICAMENTOXPEDIDO(
Pedido INT NOT NULL,
Medicamento VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Pedido,Medicamento)
);

CREATE TABLE MEDICAMENTOXRECETA(
Receta INT NOT NULL,
Medicamento VARCHAR(50) NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Receta,Medicamento)
);

CREATE TABLE TELEFONOXCLIENTE(
Cliente INT NOT NULL,
Telefono INT NOT NULL,
Activo BIT NOT NULL,
PRIMARY KEY(Cliente,Telefono)
);
use GasStationPharmacy
GO

ALTER TABLE MEDICAMENTO
ADD FOREIGN KEY (CasaFarmaceutica) REFERENCES CASAFARMACEUTICA(Nombre);

ALTER TABLE PEDIDO
ADD FOREIGN KEY (Sucursal) REFERENCES SUCURSAL(Nombre);

ALTER TABLE PEDIDO
ADD FOREIGN KEY (Cliente) REFERENCES CLIENTE(Cedula);

ALTER TABLE ADMINISTRADORXSUCURSAL
ADD FOREIGN KEY (Administrador) REFERENCES EMPLEADO(Cedula);

ALTER TABLE ADMINISTRADORXSUCURSAL
ADD FOREIGN KEY (Sucursal) REFERENCES SUCURSAL(Nombre);

ALTER TABLE PADECIMIENTO
ADD FOREIGN KEY (Cliente) REFERENCES CLIENTE(Cedula);

ALTER TABLE ROLXDEPENDIENTE
ADD FOREIGN KEY (Rol) REFERENCES ROL(Nombre);

ALTER TABLE ROLXDEPENDIENTE
ADD FOREIGN KEY (Dependiente) REFERENCES CLIENTE(Cedula);

ALTER TABLE MEDICAMENTOXPEDIDO
ADD FOREIGN KEY (Pedido) REFERENCES PEDIDO(Numero);

ALTER TABLE MEDICAMENTOXPEDIDO
ADD FOREIGN KEY (Medicamento) REFERENCES MEDICAMENTO(Nombre);

ALTER TABLE MEDICAMENTOXRECETA
ADD FOREIGN KEY (Receta) REFERENCES RECETA(Numero);

ALTER TABLE MEDICAMENTOXRECETA
ADD FOREIGN KEY (Medicamento) REFERENCES MEDICAMENTO(Nombre);

ALTER TABLE TELEFONOXCLIENTE
ADD FOREIGN KEY (Cliente) REFERENCES CLIENTE(Cedula);

ALTER TABLE EMPLEADO
ADD FOREIGN KEY (Sucursal) REFERENCES SUCURSAL(Nombre);